<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BevyFinder - Ultimate Drink Database | Find Beer, Wine & Cocktail Info</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="BevyFinder: The #1 drink database for beer, wine & cocktail information. Find ABV, calories, ingredients, standard drinks & nutritional info for 500+ drinks. Perfect for Australian beers, craft beers & cocktails.">
    <meta name="keywords" content="beer database, wine database, cocktail database, drink finder, alcohol content, ABV calculator, standard drinks, Australian beer, craft beer, beer calories, wine calories, cocktail ingredients, dan murphy's, liquor store, beer finder, wine finder, cocktail finder, bevy finder, drink database">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="BevyFinder - Ultimate Drink Database">
    <meta property="og:description" content="Find ABV, calories, ingredients & nutritional info for 500+ drinks. Perfect for Australian beers, craft beers & cocktails.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bevyfinder.com">
    <meta property="og:image" content="https://bevyfinder.com/og-image.jpg">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="BevyFinder - Ultimate Drink Database">
    <meta name="twitter:description" content="Find ABV, calories, ingredients & nutritional info for 500+ drinks.">
    <meta name="twitter:image" content="https://bevyfinder.com/twitter-image.jpg">
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#667eea">
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css?v=1.0.11">
    
    <!-- Analytics -->
    <script src="analytics.js?v=1.0.3"></script>
    <script src="fallback-analytics.js?v=1.0.3"></script>
    <script src="server-api.js?v=1.0.13"></script>
    <script src="auth.js?v=1.0.9"></script>
    <script src="script.js?v=1.0.13"></script>
    
    <!-- Enhanced Cache Control and Auto-Update System -->
    <script>
        // Debug logging
        console.log('üîç DEBUG: HTML loaded - testing JavaScript execution');
        
        // Check if all scripts loaded
        window.addEventListener('load', function() {
            console.log('üîç DEBUG: All resources loaded');
            console.log('üîç DEBUG: BevyFinderAPI available:', typeof BevyFinderAPI !== 'undefined');
            console.log('üîç DEBUG: BevyFinderAuth available:', typeof BevyFinderAuth !== 'undefined');
            console.log('üîç DEBUG: auth instance available:', typeof auth !== 'undefined');
        });
        
        // Global error handler
        window.addEventListener('error', function(e) {
            console.error('üîç DEBUG: Global error caught:', e.error);
            console.error('üîç DEBUG: Error message:', e.message);
            console.error('üîç DEBUG: Error filename:', e.filename);
            console.error('üîç DEBUG: Error line:', e.lineno);
        });
        
        // Unhandled promise rejection handler
        window.addEventListener('unhandledrejection', function(e) {
            console.error('üîç DEBUG: Unhandled promise rejection:', e.reason);
        });
    </script>
</head>
<body>
    <!-- Auth Page -->
    <div id="auth-page" class="auth-page">
        <div class="auth-container">
            <div class="auth-header">
                <h1><i class="fas fa-wine-glass-alt"></i> BevyFinder</h1>
                <p>Your Ultimate Drink Database</p>
            </div>
            
            <!-- Sign In Form -->
            <div id="signin-container">
                <form id="signin-form">
                    <input type="email" id="signin-email" placeholder="Email" required>
                    <input type="password" id="signin-password" placeholder="Password" required>
                    <div class="checkbox-group">
                        <input type="checkbox" id="remember-me">
                        <label for="remember-me">Remember me</label>
                    </div>
                    <button type="submit" class="auth-btn primary">Sign In</button>
                </form>
            </div>
            
            <!-- Sign Up Form -->
            <div id="signup-container" style="display: none;">
                <form id="signup-form">
                    <input type="text" id="signup-name" placeholder="Full Name" required>
                    <input type="email" id="signup-email" placeholder="Email" required>
                    <input type="password" id="signup-password" placeholder="Password" required>
                    <button type="submit" class="auth-btn primary">Create Account</button>
                </form>
            </div>
            
            <!-- Toggle between sign in and sign up -->
            <div class="auth-toggle">
                <span id="auth-toggle-text">Don't have an account?</span>
                <button id="auth-toggle" class="auth-btn secondary">Sign Up</button>
            </div>
        </div>
    </div>

    <!-- Main App Content -->
    <div id="main-content" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-wine-glass-alt"></i> BevyFinder</h1>
                <p>Your Ultimate Drink Database</p>
                <button class="profile-btn-header" onclick="toggleProfileMenu()">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </header>

        <!-- Profile Menu -->
        <div id="profile-menu" class="profile-menu" style="display: none;">
            <div class="profile-menu-header">
                <i class="fas fa-user-circle"></i>
                <span>User</span>
            </div>
            <div class="profile-menu-content">
                <div class="profile-menu-item" onclick="showProfilePage()">
                    <i class="fas fa-user"></i> Profile
                </div>
                <div class="profile-menu-item" onclick="showSettings()">
                    <i class="fas fa-cog"></i> Settings
                </div>
                <div class="profile-menu-item" onclick="showAbout()">
                    <i class="fas fa-info-circle"></i> About
                </div>
                <div class="profile-menu-item" onclick="signOut()">
                    <i class="fas fa-sign-out-alt"></i> Sign Out
                </div>
            </div>
        </div>

        <!-- Dashboard -->
        <div id="dashboard-page" class="page active">
            <div class="pinboard-container">
                <h2>Welcome to BevyFinder</h2>
                <p>Choose what you'd like to do:</p>
                
                <div class="pinboard-grid">
                    <div class="pinboard-item" onclick="showSearchPage()">
                        <div class="pinboard-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Search Drinks</h3>
                        <p>Find beer, wine & cocktail information</p>
                    </div>
                    
                    <div class="pinboard-item" onclick="showTrackingPage()">
                        <div class="pinboard-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3>Night Tracker</h3>
                        <p>Track your drinks & monitor BAC</p>
                    </div>
                    
                    <div class="pinboard-item" onclick="showFavoritesPage()">
                        <div class="pinboard-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Favorites</h3>
                        <p>Your saved drinks</p>
                    </div>
                    
                    <div class="pinboard-item" onclick="showFeaturedPage()">
                        <div class="pinboard-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3>Featured</h3>
                        <p>Top liked drinks this week</p>
                    </div>
                    
                    <div class="pinboard-item" onclick="showFriendsPage()">
                        <div class="pinboard-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Friends</h3>
                        <p>Connect with friends (Coming Soon)</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Other pages would go here -->
        <div id="search-page" class="page">
            <h2>Search Drinks</h2>
            <p>Search functionality coming soon...</p>
        </div>
        
        <div id="tracking-page" class="page">
            <h2>Night Tracker</h2>
            <p>Tracking functionality coming soon...</p>
        </div>
        
        <div id="favorites-page" class="page">
            <h2>Favorites</h2>
            <p>Favorites functionality coming soon...</p>
        </div>
        
        <div id="featured-page" class="page">
            <h2>Featured Drinks</h2>
            <p>Featured drinks functionality coming soon...</p>
        </div>
        
        <div id="friends-page" class="page">
            <h2>Friends</h2>
            <p>Friends functionality coming soon...</p>
        </div>
    </div>

    <!-- PWA Install Button -->
    <div id="install-button" style="display: none; position: fixed; bottom: 20px; right: 20px; z-index: 1000;">
        <button onclick="installPWA()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 25px; border-radius: 10px; font-weight: bold; cursor: pointer;">
            üì± Download App
        </button>
    </div>

    <script>
        // PWA Installation
        let deferredPrompt;
        
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('üîç DEBUG: PWA install prompt received');
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('install-button').style.display = 'block';
        });
        
        window.addEventListener('appinstalled', () => {
            console.log('üîç DEBUG: PWA installed');
            document.getElementById('install-button').style.display = 'none';
        });
        
        function installPWA() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('üîç DEBUG: User accepted PWA install');
                    }
                    deferredPrompt = null;
                });
            }
        }
        
        // Profile menu functions
        function toggleProfileMenu() {
            console.log('üîç DEBUG: Toggle profile menu called');
            const menu = document.getElementById('profile-menu');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }
        
        function showProfilePage() {
            console.log('üîç DEBUG: Show profile page called');
            // Implementation coming soon
        }
        
        function showSettings() {
            console.log('üîç DEBUG: Show settings called');
            // Implementation coming soon
        }
        
        function showAbout() {
            console.log('üîç DEBUG: Show about called');
            // Implementation coming soon
        }
        
        function signOut() {
            console.log('üîç DEBUG: Sign out called');
            if (typeof auth !== 'undefined') {
                auth.signOut();
            }
        }
        
        function showSearchPage() {
            console.log('üîç DEBUG: Show search page called');
            showPage('search-page');
        }
        
        function showTrackingPage() {
            console.log('üîç DEBUG: Show tracking page called');
            showPage('tracking-page');
        }
        
        function showFavoritesPage() {
            console.log('üîç DEBUG: Show favorites page called');
            showPage('favorites-page');
        }
        
        function showFeaturedPage() {
            console.log('üîç DEBUG: Show featured page called');
            showPage('featured-page');
        }
        
        function showFriendsPage() {
            console.log('üîç DEBUG: Show friends page called');
            showPage('friends-page');
        }
        
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
        }
        
        // Close profile menu when clicking outside
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('profile-menu');
            const profileBtn = document.querySelector('.profile-btn-header');
            
            if (!menu.contains(e.target) && !profileBtn.contains(e.target)) {
                menu.style.display = 'none';
            }
        });
        
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('üîç DEBUG: Service Worker registered:', registration);
                    })
                    .catch((error) => {
                        console.error('üîç DEBUG: Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>
</html> 